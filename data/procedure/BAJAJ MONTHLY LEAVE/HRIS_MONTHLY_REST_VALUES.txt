create or replace PROCEDURE HRIS_RESET_MONTHLY_VALUES(
    P_DATE DATE)
AS
  IS_START_OF_MONTH CHAR(1 BYTE);
BEGIN
  SELECT 'Y'
  INTO IS_START_OF_MONTH
  FROM HRIS_MONTH_CODE
  WHERE FROM_DATE = TRUNC(P_DATE);
  BEGIN
    FOR monthlyLeaves IN
    (SELECT * FROM HRIS_LEAVE_MASTER_SETUP WHERE IS_MONTHLY ='Y' AND CARRY_FORWARD='N'  AND STATUS ='E'
    )
    LOOP
      UPDATE HRIS_EMPLOYEE_LEAVE_ASSIGN
      SET BALANCE    = monthlyLeaves.DEFAULT_DAYS,
        TOTAL_DAYS   =monthlyLeaves.DEFAULT_DAYS
      WHERE LEAVE_ID = monthlyLeaves.LEAVE_ID;
    END LOOP;
  END;
EXCEPTION
WHEN NO_DATA_FOUND THEN
  NULL;
END;
 